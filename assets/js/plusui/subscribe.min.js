import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
import { getDatabase, ref, set, query, orderByChild, equalTo, get } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js";

  // Konfigurasi Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyCDqLMbqjfPh-E2w-8gWZOMoKqFOJY8DpU",
    authDomain: "subscribesabda.firebaseapp.com",
    databaseURL: "https://subscribesabda-default-rtdb.firebaseio.com",
    projectId: "subscribesabda",
    storageBucket: "subscribesabda.firebasestorage.app",
    messagingSenderId: "1002892047780",
    appId: "1:1002892047780:web:7b660571cdb99edf38fd31"
  };

  // Inisialisasi Firebase
const app = initializeApp(firebaseConfig);
const database = getDatabase(app);
const form = document.getElementById('subscribeForm');
const popup = document.getElementById('popup');
const overlay = document.getElementById('overlay');
const popupMessage = document.getElementById('popupMessage');
document.getElementById('HTML11_Subscriber').innerHTML=`<style>#SubscriberForm{max-width:400px;margin:auto;padding:20px;border:1px solid #ddd;border-radius:8px;background-color:var(--contentB);box-shadow:0 4px 8px rgba(0,0,0,.1);font-family:Arial,sans-serif}#SubscriberForm .subscribe-widget h2{font-size:24px;margin-bottom:15px;text-align:center}#SubscriberForm .form-group{margin-bottom:15px;text-align:left}#SubscriberForm .form-group label{font-size:14px;margin-bottom:5px;display:block}#SubscriberForm .form-group input{width:100%;padding:10px;border:1px solid #ccc;border-radius:4px;font-size:14px;outline:0}#SubscriberForm .form-group input:focus{border-color:#007bff;box-shadow:0 0 4px rgba(0,123,255,.2)}#SubscriberForm .btn-submit,#SubscriberForm .popup .close-btn{background-color:var(--linkB);color:#fff;padding:10px 20px;font-size:16px;border:none;border-radius:4px;cursor:pointer;width:100%}#SubscriberForm .btn-submit:hover{opacity:.8}#SubscriberForm .popup{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);padding:20px;border-radius:8px;background-color:var(--contentB);box-shadow:0 4px 8px rgba(0,0,0,.2);text-align:center;display:none;z-index:1000}#SubscriberForm .popup.success{border:2px solid #28a745;color:#28a745}#SubscriberForm .popup.error{border:2px solid #dc3545;color:#dc3545}#SubscriberForm .overlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.5);z-index:999;display:none} .drK #SubscriberForm, .drK #SubscriberForm input,.drK #SubscriberForm label,.drK #SubscriberForm h2 { background: var(--darkBa); color: var(--darkT);}.drK #SubscriberForm .popup{background: var(--darkBa)}</style><div id="SubscriberForm"> <div class="subscribe-widget"> <h2>Subscribe to Our Newsletter</h2> <form id="subscribeForm"> <div class="form-group"> <label for="name">Nama:</label> <input type="text" id="name" name="name" required> </div> <div class="form-group"> <label for="email">Email:</label> <input type="email" id="email" name="email" required> </div> <button type="submit" class="btn-submit">Subscribe</button> </form> </div><div class="overlay" id="overlay"></div> <div class="popup" id="popup"> <p id="popupMessage"></p> <button class="close-btn" id="closePopup">Tutup</button> </div> </div>`
form.addEventListener("submit",async e=>{e.preventDefault();let a=document.getElementById("name").value,t=document.getElementById("email").value.toLowerCase();try{let r=query(ref(database,"subscribers"),orderByChild("email"),equalTo(t)),s=await get(r);if(s.exists()){showPopup("Email sudah terdaftar.","error"),form.reset();return}let i=Date.now().toString();await set(ref(database,"subscribers/"+i),{nama:a,email:t}),showPopup("Sukses! Terima kasih telah berlangganan.","success"),form.reset()}catch(l){showPopup("Terjadi kesalahan. Silakan coba lagi.","error")}});document.getElementById('closePopup').addEventListener('click', function () {popup.style.display = 'none';overlay.style.display = 'none'});function showPopup(message, type) {popupMessage.textContent = message;popup.className=`popup ${type}`;popup.style.display = 'block';overlay.style.display = 'block';}
