!function(){let e=document.getElementById("username"),t=document.getElementById("description"),a=document.getElementById("profile-picture"),i=document.getElementById("stats"),l=document.getElementById("video-gallery"),d=document.getElementById("popup"),r=document.getElementById("popup-content"),n=d.querySelector(".close-btn"),s=null;function o(e,t=50){return e?e.length>t?e.slice(0,t)+"...":e:""}async function c(){try{let n=await (await fetch("https://sabdaliterasi.xyz/api/tiktok.json")).json(),c=n.source.data["/embed/@sabdaliterasipalu?lang=id"].userInfo,p=n.source.data["/embed/@sabdaliterasipalu?lang=id"].videoList;e.textContent="@"+c.uniqueId,t.textContent=c.signature||"Tidak ada deskripsi.",a.src=c.avatarThumbUrl||"https://via.placeholder.com/150",i.textContent=`Followers: ${"1"+c.followerCount} â€¢ Likes: ${c.heartCount||0}`,l.innerHTML="",r.innerHTML="",p.forEach((e,t)=>{let a=`https://sabdaliterasi.xyz/api/embed-video-tiktok/${e.id}`,i=e.coverUrl||"https://via.placeholder.com/200",n=document.createElement("div");n.classList.add("video");let s=document.createElement("img");s.src=i,s.alt=o(e.desc,50);let c=document.createElement("div");c.classList.add("info"),c.textContent=o(e.desc,50);let p=document.createElement("div");p.classList.add("play-count"),p.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" fill="#fff" viewBox="0 0 24 24"><path d="M3 22v-20l18 10-18 10z"/></svg>    ${e.playCount||0}`,n.appendChild(s),n.appendChild(c),n.appendChild(p),n.addEventListener("click",()=>{var e;let a,i,l,n,s;return e=t,d.classList.add("active"),d.classList.remove("hidden"),a=r.querySelectorAll(".iframe-container"),i=a[e]?.querySelector("iframe"),i&&i.dataset.src&&(i.src=i.dataset.src),l=a[e].offsetTop,n=r.clientHeight,s=a[e].clientHeight,void r.scrollTo({top:l-n/2+s/2,behavior:"smooth"})}),l.appendChild(n);let h=document.createElement("div");h.classList.add("iframe-container");let m=document.createElement("iframe");m.classList.add("MyVideoIfr"),m.setAttribute("data-src",a),m.setAttribute("loading","lazy"),m.frameBorder="0",m.width=e.width,m.height=e.height,h.appendChild(m),r.appendChild(h)});let h=`https://www.tiktok.com/@${c.uniqueId}`;document.getElementById("follow-btn").addEventListener("click",()=>{window.open(h,"_blank")}),s&&s.disconnect(),s=new IntersectionObserver(e=>{e.forEach(e=>{let t=e.target;if(!e.isIntersecting){let a=t.dataset.src;t.src="",setTimeout(()=>{t.src=a},100)}})},{root:r,rootMargin:"0px",threshold:.2}),r.querySelectorAll("iframe").forEach(e=>s.observe(e))}catch(m){console.error("Failed to fetch JSON feed:",m),l.innerHTML="<p>Gagal memuat video. Coba lagi nanti.</p>"}}n.addEventListener("click",()=>{d.classList.remove("active"),d.classList.add("hidden");r.querySelectorAll("iframe.MyVideoIfr").forEach(e=>{e.src=""})}),d.addEventListener("click",e=>{e.target===d&&d.classList.remove("active"),d.classList.add("hidden")}),c()}();
